// js/foxy/responses.js
import { pinterestLink, emoji } from "./personality.js";

// üíÖ —Å–ø–∏—Å–æ–∫ —É—Å–ª—É–≥
export const services = {
  "–∫–æ–º–±–∏ –º–∞–Ω–∏–∫—é—Ä":        "–°–Ω—è—Ç–∏–µ + –∫–æ–º–±–∏-–º–∞–Ω–∏–∫—é—Ä ‚Äî 1000‚ÇΩ.",
  "–º–∞–Ω–∏–∫—é—Ä —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º":  "–°–Ω—è—Ç–∏–µ + –∫–æ–º–±–∏ + —É–∫—Ä–µ–ø–ª–µ–Ω–∏–µ + –¥–∏–∑–∞–π–Ω ‚Äî –æ—Ç 1700‚ÇΩ.",
  "–∫–æ—Ä—Ä–µ–∫—Ü–∏—è –¥–ª–∏–Ω—ã":      "–ö–æ—Ä—Ä–µ–∫—Ü–∏—è –¥–ª–∏–Ω—ã —Å –¥–∏–∑–∞–π–Ω–æ–º ‚Äî 2100‚ÇΩ.",
  "–Ω–∞—Ä–∞—â–∏–≤–∞–Ω–∏–µ –Ω–æ–≥—Ç–µ–π":    "–ü–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å + –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω ‚Äî 3000‚ÇΩ.",
  "—Å–Ω—è—Ç–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è":       "–°–Ω—è—Ç–∏–µ –±–µ–∑ –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è ‚Äî 500‚ÇΩ."
};

// üí¨ —à–∞–±–ª–æ–Ω—ã –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
export const replies = {
  greeting: [
    `${emoji} –ü—Ä–∏–≤–µ—Ç-–ø—Ä–∏–≤–µ—Ç! –Ø –§–æ–∫—Å–∏ üíÖ –ì–æ—Ç–æ–≤–∞ –ø–æ–º–æ—á—å —Å –Ω–æ–≥–æ—Ç–æ—á–∫–∞–º–∏!`,
    `${emoji} –ü—Ä–∏–≤–µ—Ç–∏–∫! –ß—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Å–µ–≥–æ–¥–Ω—è ‚Äî –Ω—é–¥, –±–ª—ë—Å—Ç–∫–∏ –∏–ª–∏ –∫–æ—à–∞—á–∏–π –≥–ª–∞–∑? üòò`,
    `${emoji} –°–∞–ª—é—Ç! –î–∞–≤–∞–π –≤—ã–±–µ—Ä–µ–º —á—Ç–æ-—Ç–æ —Å—Ç–∏–ª—å–Ω–æ–µ –≤–º–µ—Å—Ç–µ üåà`
  ],
  mood: [
    `${emoji} –£ –º–µ–Ω—è –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ! –¢–æ–ª—å–∫–æ —á—Ç–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏–ª–∞ –Ω–æ–≤—ã–π –¥–∏–∑–∞–π–Ω —Å –ª–∞–≤–∞–Ω–¥–æ–π üíú`,
    `${emoji} –°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Å–ø—Ä–æ—Å–∏–ª(–∞)! –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ ‚Äî –∫–∞–∫ —Å–≤–µ–∂–∏–π –º–∞–Ω–∏–∫—é—Ä ‚ú®`
  ],
  smalltalk: [
    `${emoji} –•–º–º‚Ä¶ –º–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –ø—Ä–æ –ª–µ—Ç–Ω–∏–µ —Ç—Ä–µ–Ω–¥—ã üíÖ –ò–ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å –Ω—é–¥-–≤–∞—Ä–∏–∞–Ω—Ç—ã. –ß—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ?`,
    `${emoji} –ê –¥–∞–≤–∞–π –ø–æ–≥–æ–≤–æ—Ä–∏–º –ø—Ä–æ –¥–∏–∑–∞–π–Ω —Å –±–ª—ë—Å—Ç–∫–∞–º–∏? –ò–ª–∏ —Ö–æ—á–µ—à—å –∫–ª–∞—Å—Å–∏–∫—É?`
  ],
  thanks: [
    `${emoji} –í—Å–µ–≥–¥–∞ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ üíñ –ù–∞–¥–µ—é—Å—å, —Å–∫–æ—Ä–æ —É–≤–∏–¥–∏–º—Å—è!`,
    `${emoji} –û–±—Ä–∞—â–∞–π—Å—è, —è —Ç—É—Ç 24/7 ‚òï`
  ],
  bye: [
    `${emoji} –ü–æ–∫–∞-–ø–æ–∫–∞! –£–¥–∞—á–Ω–æ–≥–æ –¥–Ω—è –∏ —à–∏–∫–∞—Ä–Ω—ã—Ö –Ω–æ–≥—Ç–µ–π üíñ`,
    `${emoji} –î–æ —Å–∫–æ—Ä–æ–≥–æ, –∫—Ä–∞—Å–æ—Ç–∫–∞! üíÖ`
  ],
  softWarning: [
    `${emoji} –î–∞–≤–∞–π –ø–æ-–¥–æ–±—Ä–æ–º—É ‚Äî —É –Ω–∞—Å —Ç—É—Ç –∫—Ä–∞—Å–æ—Ç–∞ –∏ —É—é—Ç ‚ú®`
  ],
  fallback: [
    `${emoji} –ù–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª–∞‚Ä¶ –î–∞–≤–∞–π –≤—ã–±–µ—Ä–µ–º –∏–∑ —Å–ø–∏—Å–∫–∞?`
  ],
  design: [
    () => `${emoji} –î–ª—è –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –¥–∏–∑–∞–π–Ω–æ–º –Ω–æ–≥—Ç–µ–π –∑–∞–≥–ª—è–Ω–∏ —Å—é–¥–∞: ` +
          `<a href="${pinterestLink}" target="_blank" class="text-pink-600 underline">` +
          `Pinterest ‚Äî –¥–∏–∑–∞–π–Ω –æ—Ç –§–æ–∫—Å–∏</a>`
  ]
};

// üé≤ —Å–ª—É—á–∞–π–Ω—ã–π –æ—Ç–≤–µ—Ç –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
export function randomReply(intent) {
  const arr = replies[intent] || replies.fallback;
  const item = arr[Math.floor(Math.random() * arr.length)];
  return typeof item === "function" ? item() : item;
}

// üî° –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
function normalize(text) {
  return text.toLowerCase().replace(/[^\w\s–∞-—è—ë]/gi, "").trim();
}

// üß† —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞ —Å —É—Å–ª—É–≥–∞–º–∏
export function matchService(text) {
  text = normalize(text);
  for (let key in services) {
    if (normalize(key) === text) return { exact: true, name: key };
  }
  if (text.length >= 3) {
    for (let key in services) {
      if (normalize(key).includes(text) || text.includes(normalize(key))) {
        return { exact: false, name: key };
      }
    }
  }
  return null;
}
